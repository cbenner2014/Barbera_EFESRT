<div th:fragment="content">
	<!-- Contenedor Principal -->
	<main class="container mx-auto my-8 px-4">
		<!-- Botones de acción inferiores -->
		<div class="flex justify-between items-center mb-8">
			<a th:href="@{/barberos/nuevo}"
				class="flex items-center px-4 py-2 rounded-md bg-brand-accent text-white font-sans font-medium text-sm hover:bg-brand-accent/80 transition-colors">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"> <path
						d="M17 9a2 2 0 00-2-2h-2V5a2 2 0 00-2-2H9a2 2 0 00-2 2v2H5a2 2 0 00-2 2v2a2 2 0 002 2h2v2a2 2 0 002 2h2a2 2 0 002-2v-2h2a2 2 0 002-2V9z" /></svg>
				Añadir Barbero
			</a>
			
			<a th:href="@{/}"
				class="flex items-center px-4 py-2 rounded-md border border-text-primary/20 text-text-primary font-sans font-medium text-sm hover:bg-background-secondary transition-colors">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2"
					viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd"
						d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z"
						clip-rule="evenodd" /></svg> Menú Principal
			</a>
		</div>

		<div class=" rounded-2xl ">
			<div
				class="bg-background-secondary rounded-xl shadow-lg overflow-hidden">
				<div class="overflow-x-auto">
					<table class="w-full text-left">
						<thead class="border-b border-text-primary/20">
							<tr>
								<th class="p-4 font-bold text-text-primary">ID</th>
								<th class="p-4 font-bold text-text-primary">Nombre</th>
								<th class="p-4 font-bold text-text-primary">Edad</th>
								<th class="p-4 font-bold text-text-primary">Email</th>
								<th class="p-4 font-bold text-text-primary">Usuario</th>
								<th class="p-4 font-bold text-text-primary  text-center">Acciones</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="barbero : ${barberoList}"
								class="border-b border-background-primary last:border-b-0 hover:bg-background-primary/50 transition-colors">
								<td class="px-4 py-3 text-text-primary text-sm"
									th:text="${barbero.idBarbero}"></td>
								<td class="px-4 py-3 text-text-primary text-sm"
									th:text="${barbero.nombreBarbero}"></td>
								<td class="px-4 py-3 text-text-primary text-sm"
									th:text="${barbero.edadBarbero}"></td>
								<td class="px-4 py-3 text-text-primary text-sm"
									th:text="${barbero.emailBarbero}"></td>
								<td class="px-4 py-3 text-text-primary text-sm"
									th:text="${barbero.usuarioBarbero}"></td>
								<td
									class="p-4 text-center space-x-4 whitespace-nowrap align-middle">
									
									<a th:href="@{/barberos/editar/{id}(id=${barbero.idBarbero})}" class="inline-block text-text-primary/70 hover:text-brand-accent transition-colors" title="Editar"> 
									<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"> <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"clip-rule="evenodd" /></svg>
									</a> 
								
									<a th:href="@{/barberos/ver/{id}(id=${barbero.idBarbero})}"
										class="inline-block text-text-primary/70 hover:text-blue-400 transition-colors"
										title="Ver"> <svg xmlns="http://www.w3.org/2000/svg"
												class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
												<path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
												<path fill-rule="evenodd"
													d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.27 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
													clip-rule="evenodd" /></svg>
									</a> 
									<a href="javascript:void(0)"
										class="inline-block text-text-primary/70 hover:text-red-500 transition-colors"
										title="Eliminar"
										th:onclick="|mostrarModaEliminar(${barbero.idBarbero})|"> <svg
												xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
												viewBox="0 0 20 20" fill="currentColor">
												<path fill-rule="evenodd"
													d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
													clip-rule="evenodd" /></svg>
									</a>
								
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

		</div>
	</main>

	<!-- Modal Éxito Cliente Registrado -->
	<div id="modalBarberoAgregado" th:if="${barberoAgregado}"
		class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
		<div
			class="bg-white rounded-2xl p-6 shadow-xl text-center max-w-sm w-full">
			<h2 class="text-xl font-bold text-green-600 mb-2">¡Barbero
				Registrado!</h2>
			<p class="text-gray-700 mb-4">El nuevo barbero fue registrado
				correctamente.</p>
			<button onclick="cerrarModal('modalBarberoAgregado')"
				class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold">Aceptar</button>
		</div>
	</div>

	<!-- Modal Éxito Cliente Editado -->
	<div id="modalBarberoEditado" th:if="${barberoEditado}"
		class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
		<div
			class="bg-white rounded-2xl p-6 shadow-xl text-center max-w-sm w-full">
			<h2 class="text-xl font-bold text-blue-600 mb-2">¡Barbero
				Editado!</h2>
			<p class="text-gray-700 mb-4">Los datos del barbero fueron
				actualizados correctamente.</p>
			<button onclick="cerrarModal('modalBarberoEditado')"
				class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold">Aceptar</button>
		</div>
	</div>

	<div id="confirmDeleteModal"
		class=" fixed inset-0 z-50 hidden flex items-center justify-center bg-black bg-opacity-50">
		<div
			class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-md text-center">
			<h2 class="text-xl font-bold text-red-600 mb-4">Confirmar
				Eliminación</h2>
			<p class="text-gray-700 mb-6">¿Estás seguro de que deseas
				eliminar este barbero?</p>
			<div class="flex justify-center space-x-4">
				<a id="confirmDeleteBtn" href="#"
					class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold shadow">
					Sí, Eliminar </a>
				<button type="button" onclick="cerrarModal('confirmDeleteModal')"
					class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-lg font-semibold shadow">Cancelar
				</button>
			</div>

		</div>
	</div>

	<!-- Modal Error Eliminación -->
	<div id="modalErrorEliminacion" th:if="${errorEliminacion}"
		class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
		<div
			class="bg-white rounded-2xl p-6 shadow-xl text-center max-w-sm w-full border-l-4 border-yellow-500">
			<h2 class="text-xl font-bold text-yellow-600 mb-2">No se puede
				eliminar</h2>
			<p class="text-gray-700 mb-4">Este barbero tiene citas
				registradas y no puede ser eliminado.</p>
			<button
				onclick="document.getElementById('modalErrorEliminacion').classList.add('hidden')"
				class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-semibold">
				Aceptar</button>
		</div>
	</div>

	<script>
		function mostrarModaEliminar(id) {
			const eliminarBtn = document.getElementById('confirmDeleteBtn');
			eliminarBtn.href = `/barberos/eliminar/${id}`;
			document.getElementById('confirmDeleteModal').classList
					.remove('hidden');
		}

		function cerrarModal(id) {
			document.getElementById(id).classList.add('hidden');
		}

		document.getElementById('confirmDeleteModal').addEventListener('click',
				function(e) {
					if (e.target === this) {
						cerrarModal('confirmDeleteModal');
					}
				});
	</script>

	<script th:if="${errorEliminacion}">
		document.addEventListener("DOMContentLoaded", function() {
			const modal = document.getElementById('modalErrorEliminacion');
			if (modal) {
				modal.classList.remove("hidden");
				modal.classList.add("flex");
			}
		});
	</script>
</div>